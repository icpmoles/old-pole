{{- $ytid := (index .Params 0) }}

{{ $filter := images.Grayscale }}
<figure class="lite-youtube-container">
{{- $thumbnailUrl := printf "https://i.ytimg.com/vi_webp/%s/hqdefault.webp" $ytid }}
{{- with try ($thumbnail := resources.GetRemote $thumbnailUrl ) }}
{{- with .Err }}
      {{- warnf "%s" . }}
        <lite-youtube videoid="{{ $.youtubeID }}" style="background-image: url('https://i.ytimg.com/vi_webp/{{ $ytid }}/hqdefault.webp'); ">
        <a href="https://youtube.com/watch?v={{ $ytid }}" class="lty-playbtn" title="Play Video">
          <span class="lyt-visually-hidden">Youtube video</span>
        </a>
        </lite-youtube>
  {{- else with .Value  }}
  {{- with . | images.Filter $filter  }}
    {{ with .Resize "x720" }}
    <lite-youtube videoid="{{ $ytid}}" style="background-image: url('{{ .RelPermalink }}');">
    <a href="https://youtube.com/watch?v={{ $ytid }}" class="lty-playbtn u-repost-of" title="Play Video">
      <span class="lyt-visually-hidden">Youtube video</span>
    </a>
    </lite-youtube>
    {{ end }}
  {{- end }}
{{- end }}
{{- end }}
<figcaption class="small u-repost-of" > <a href="https://youtube.com/watch?v={{ $ytid }}" >Youtube Video</a></figcaption>
</figure>